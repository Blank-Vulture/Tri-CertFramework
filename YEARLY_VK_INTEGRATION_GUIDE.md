# å¹´åº¦åˆ¥VKçµ±åˆæ©Ÿèƒ½ã‚¬ã‚¤ãƒ‰

## ğŸ¯ æ¦‚è¦

Tri-CertFrameworkã«å¹´åº¦åˆ¥æ¤œè¨¼éµï¼ˆVKï¼‰ç®¡ç†æ©Ÿèƒ½ã‚’çµ±åˆã—ã¾ã—ãŸã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å’æ¥­å¹´åº¦ã”ã¨ã«ç•°ãªã‚‹VKã‚’ä½¿ç”¨ã—ã¦ã€ã‚ˆã‚Šç´°ã‹ã„è¨¼æ˜æ›¸ç®¡ç†ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

## ğŸ—ï¸ å®Ÿè£…ã•ã‚ŒãŸæ©Ÿèƒ½

### 1. ZKPå›è·¯ã®å¹´åº¦å¯¾å¿œ
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `circuits/commitment.circom`
- **å¤‰æ›´ç‚¹**: `graduation_year`ã‚’å…¬é–‹å…¥åŠ›ã¨ã—ã¦è¿½åŠ 
- **æ–°ã—ã„å…¥åŠ›æ§‹é€ **:
  ```
  Private: owner_secret
  Public: pdf_sha3_512, graduation_year
  Output: commit = Poseidon(owner_secret, pdf_sha3_512, graduation_year)
  ```

### 2. Scholar Prover ã®å¹´åº¦å…¥åŠ›æ©Ÿèƒ½
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `prover/src/app/components/ProofGenerator.tsx`
- **æ©Ÿèƒ½**:
  - å¹´åº¦é¸æŠUIï¼ˆã‚¯ã‚¤ãƒƒã‚¯ãƒœã‚¿ãƒ³ + æ‰‹å‹•å…¥åŠ›ï¼‰
  - åŠè§’æ•°å­—åˆ¶é™ï¼ˆinputMode: numeric, pattern: [0-9]*ï¼‰
  - å¹´åº¦ç¯„å›²ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ2000-2050å¹´ï¼‰
  - å¹´åº¦åˆ¥circuit_idç”Ÿæˆï¼ˆ`commitment_poseidon_YYYY_v1`ï¼‰

### 3. Executive Console ã®æ–°è¦ä½œæˆ
- **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª**: `executive-console/`
- **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**: Vite + React + TypeScript + TailwindCSS
- **ä¸»è¦æ©Ÿèƒ½**:
  - å¹´åº¦åˆ¥VKç”Ÿæˆãƒ»ç®¡ç†
  - VKãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆ`vkey_YYYY.json`ï¼‰
  - VKãƒãƒƒã‚·ãƒ¥ãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆï¼ˆ`vkey_hash_YYYY.txt`ï¼‰
  - ä¸€æ‹¬ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½

### 4. Verifier UI ã®å¹´åº¦åˆ¥æ¤œè¨¼æ©Ÿèƒ½
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `verifier-ui/src/app/page.tsx`
- **æ©Ÿèƒ½**:
  - å¹´åº¦åˆ¥VKé¸æŠãƒ¢ãƒ¼ãƒ‰
  - è¨¼æ˜æ›¸ã‹ã‚‰ã®å¹´åº¦è‡ªå‹•æ¤œå‡º
  - å¹´åº¦åˆ¥VKãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•èª­ã¿è¾¼ã¿ï¼ˆ`/vkey_YYYY.json`ï¼‰
  - ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆVKä½¿ç”¨ï¼‰

## ğŸš€ èµ·å‹•æ–¹æ³•

### Executive Console
```bash
cd executive-console
npm install
npm run dev
# http://localhost:5173 ã§ã‚¢ã‚¯ã‚»ã‚¹
```

### Scholar Prover
```bash
cd prover
npm install
npm run dev
# http://localhost:3000 ã§ã‚¢ã‚¯ã‚»ã‚¹
```

### Verifier UI
```bash
cd verifier-ui
npm install
npm run dev
# http://localhost:3001 ã§ã‚¢ã‚¯ã‚»ã‚¹
```

## ğŸ“‹ ä½¿ç”¨æ‰‹é †

### 1. å¹´åº¦åˆ¥VKç”Ÿæˆï¼ˆExecutive Consoleï¼‰
1. Executive Consoleã‚’èµ·å‹•
2. ã€ŒVK ç”Ÿæˆã€ã‚¿ãƒ–ã‚’é¸æŠ
3. å’æ¥­å¹´åº¦ã‚’æŒ‡å®šï¼ˆ2024, 2025, 2026ãªã©ï¼‰
4. ã€ŒYYYYå¹´åº¦ç”¨VKã‚’ç”Ÿæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
5. è‡ªå‹•çš„ã«`vkey_YYYY.json`ã¨`vkey_hash_YYYY.txt`ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

### 2. å¹´åº¦åˆ¥è¨¼æ˜æ›¸ç”Ÿæˆï¼ˆScholar Proverï¼‰
1. Scholar Proverã‚’èµ·å‹•
2. PDFãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
3. WebAuthnèªè¨¼è¨­å®š
4. ç§˜å¯†éµã‚’å…¥åŠ›
5. **å’æ¥­å¹´åº¦ã‚’é¸æŠ**ï¼ˆæ–°æ©Ÿèƒ½ï¼‰
6. ã€ŒGenerate Proof & Digital Signatureã€å®Ÿè¡Œ
7. å¹´åº¦æƒ…å ±ãŒå«ã¾ã‚ŒãŸè¨¼æ˜æ›¸PDFãŒç”Ÿæˆ

### 3. å¹´åº¦åˆ¥æ¤œè¨¼ï¼ˆVerifier UIï¼‰
1. Verifier UIã‚’èµ·å‹•
2. è¨¼æ˜æ›¸PDFã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
3. **å¹´åº¦åˆ¥VKé¸æŠãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–**ï¼ˆæ–°æ©Ÿèƒ½ï¼‰
4. å¹´åº¦ã‚’æŒ‡å®šã¾ãŸã¯è‡ªå‹•æ¤œå‡º
5. æ¤œè¨¼å®Ÿè¡Œ
6. å¹´åº¦ã«å¯¾å¿œã—ãŸVKã§è‡ªå‹•æ¤œè¨¼

## ğŸ”§ æŠ€è¡“è©³ç´°

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®å¤‰æ›´

#### ProofData
```typescript
interface ProofData {
  schema: string;
  circuit_id: string; // "commitment_poseidon_YYYY_v1"
  vkey_hash: string;
  public_signals: {
    pdf_sha3_512: string;
    graduation_year: string;  // æ–°è¦è¿½åŠ 
    commit: string;
  };
  proof: {
    pi_a: string[];
    pi_b: string[][];
    pi_c: string[];
  };
}
```

#### SignatureData
```typescript
interface SignatureData {
  // ... ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  sig_target: {
    schema: string;
    circuit_id: string;
    vkey_hash: string;
    pdf_sha3_512: string;
    graduation_year: string;  // æ–°è¦è¿½åŠ 
    commit: string;
    issued_at: string;
  };
}
```

### VKãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡
- **å¹´åº¦åˆ¥**: `vkey_2024.json`, `vkey_2025.json`, etc.
- **ãƒãƒƒã‚·ãƒ¥ãƒ•ã‚¡ã‚¤ãƒ«**: `vkey_hash_2024.txt`, `vkey_hash_2025.txt`, etc.
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ**: `vkey.json`ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–

### å¹´åº¦å›ºå®šã«ã‚ˆã‚‹å½é€ é˜²æ­¢
- å’æ¥­å¹´åº¦ãŒZKPå…¬é–‹ã‚·ã‚°ãƒŠãƒ«ã«å«ã¾ã‚Œã€æ”¹ã–ã‚“ä¸å¯èƒ½
- å¹´åº¦åˆ¥VKã«ã‚ˆã‚Šã€ä»–å¹´åº¦ã®VKã‚’ä½¿ç”¨ã—ãŸå½é€ ã‚’é˜²æ­¢
- circuit_idã«å¹´åº¦ãŒå«ã¾ã‚Œã€å›è·¯ãƒ¬ãƒ™ãƒ«ã§ã®æ¤œè¨¼ãŒå¯èƒ½

### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- å¹´åº¦ç¯„å›²åˆ¶é™ï¼ˆ2000-2050å¹´ï¼‰
- åŠè§’æ•°å­—ã®ã¿å…¥åŠ›å¯èƒ½
- UIãƒ»ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¸¡æ–¹ã§ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

## ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
Tri-CertFramework/
â”œâ”€â”€ executive-console/          # æ–°è¦ä½œæˆï¼ˆå¹´åº¦åˆ¥VKç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ VKGenerator.tsx
â”‚   â”‚   â”‚   â””â”€â”€ VKManager.tsx
â”‚   â”‚   â””â”€â”€ App.tsx
â”œâ”€â”€ prover/                     # å¹´åº¦å…¥åŠ›æ©Ÿèƒ½è¿½åŠ 
â”‚   â””â”€â”€ src/app/components/
â”‚       â””â”€â”€ ProofGenerator.tsx  # å¹´åº¦é¸æŠUIè¿½åŠ 
â”œâ”€â”€ verifier-ui/                # å¹´åº¦åˆ¥æ¤œè¨¼æ©Ÿèƒ½è¿½åŠ 
â”‚   â””â”€â”€ src/app/
â”‚       â””â”€â”€ page.tsx           # å¹´åº¦åˆ¥VKèª­ã¿è¾¼ã¿æ©Ÿèƒ½è¿½åŠ 
â””â”€â”€ circuits/
    â””â”€â”€ commitment.circom       # å¹´åº¦å¯¾å¿œå›è·¯
```

## ğŸ‰ å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯

- âœ… å›è·¯ã‚’å¹´åº¦å¯¾å¿œã«ä¿®æ­£ï¼ˆgraduation_year ã‚’å…¬é–‹å…¥åŠ›ã«è¿½åŠ ï¼‰
- âœ… Executive Consoleä½œæˆï¼ˆVite + React + TypeScriptï¼‰
- âœ… Proverã«å¹´åº¦å…¥åŠ›UIè¿½åŠ ï¼ˆåŠè§’æ•°å­—åˆ¶é™ï¼‰
- âœ… Verifier UIã«å¹´åº¦åˆ¥VKé¸æŠæ©Ÿèƒ½è¿½åŠ 
- âœ… Executive Consoleã§å¹´åº¦åˆ¥VKç”Ÿæˆãƒ»ç®¡ç†æ©Ÿèƒ½å®Ÿè£…

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

1. **å›è·¯ã®å®Ÿéš›ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«**: Circomç’°å¢ƒã®ä¿®æ­£
2. **ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³çµ±åˆ**: Phase 1æ©Ÿèƒ½ï¼ˆVKManager.solï¼‰
3. **Merkle Treeçµ±åˆ**: Phase 2æ©Ÿèƒ½ï¼ˆå¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿å¯¾å¿œï¼‰
4. **E2Eãƒ†ã‚¹ãƒˆ**: å¹´åº¦åˆ¥æ©Ÿèƒ½ã®ç·åˆãƒ†ã‚¹ãƒˆ

---

**æ³¨æ„**: ç¾åœ¨ã¯Phase 0å®Ÿè£…ã¨ã—ã¦ã€æ—¢å­˜ã®VKãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ™ãƒ¼ã‚¹ã«å¹´åº¦åˆ¥ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä»˜ä¸ã™ã‚‹æ–¹å¼ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®å¹´åº¦åˆ¥å›è·¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã¯ã€Circomç’°å¢ƒã®æ•´å‚™å¾Œã«å®Ÿè£…äºˆå®šã§ã™ã€‚
